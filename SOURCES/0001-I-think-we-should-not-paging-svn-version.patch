From 126f1ac616ce0b543a0dd5f53394af21c39a9f07 Mon Sep 17 00:00:00 2001
From: wuzhouhui <wuzhouhui250@gmail.com>
Date: Thu, 2 Nov 2017 12:08:07 +0800
Subject: [PATCH 1/4] I think we should not paging svn --version

---
 subversion/svn/svn.c | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)

diff --git a/subversion/svn/svn.c b/subversion/svn/svn.c
index 05ef805..d200dbe 100644
--- a/subversion/svn/svn.c
+++ b/subversion/svn/svn.c
@@ -1888,6 +1888,13 @@ add_search_pattern_to_latest_group(svn_cl__opt_state_t *opt_state,
 static svn_error_t *
 sub_main(int *exit_code, int argc, const char *argv[], apr_pool_t *pool)
 {
+  static const svn_opt_subcommand_desc2_t pseudo_cmd =
+    { "--version", svn_cl__help, {0}, "",
+      {opt_version,    /* must accept its own option */
+       'q',            /* brief output */
+       'v',            /* verbose output */
+       opt_config_dir  /* all commands accept this */
+      } };
   svn_error_t *err;
   int opt_id;
   apr_getopt_t *os;
@@ -2515,14 +2522,6 @@ sub_main(int *exit_code, int argc, const char *argv[], apr_pool_t *pool)
           if (opt_state.version)
             {
               /* Use the "help" subcommand to handle the "--version" option. */
-              static const svn_opt_subcommand_desc2_t pseudo_cmd =
-                { "--version", svn_cl__help, {0}, "",
-                  {opt_version,    /* must accept its own option */
-                   'q',            /* brief output */
-                   'v',            /* verbose output */
-                   opt_config_dir  /* all commands accept this */
-                  } };
-
               subcommand = &pseudo_cmd;
             }
           else
@@ -3102,7 +3101,8 @@ sub_main(int *exit_code, int argc, const char *argv[], apr_pool_t *pool)
 		  subcommand->cmd_func == svn_cl__log ||
 		  subcommand->cmd_func == svn_cl__status ||
 		  subcommand->cmd_func == svn_cl__list ||
-		  subcommand->cmd_func == svn_cl__help)) {
+		  subcommand->cmd_func == svn_cl__help) &&
+      subcommand != &pseudo_cmd) {
     int fd[2];
 
     if (pipe(fd) < 0) {
-- 
1.9.1

