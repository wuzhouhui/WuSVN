From 27fd22e3c436a4abe14557d55c3509c70c28ccb2 Mon Sep 17 00:00:00 2001
From: wuzhouhui <wuzhouhui250@gmail.com>
Date: Sat, 14 Oct 2017 17:55:19 +0800
Subject: [PATCH 4/5] Supress binary file's warnings when --stat

TODO: display statistics of binary files
---
 subversion/libsvn_client/diff.c | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/subversion/libsvn_client/diff.c b/subversion/libsvn_client/diff.c
index 1cbf1b5..196ab84 100644
--- a/subversion/libsvn_client/diff.c
+++ b/subversion/libsvn_client/diff.c
@@ -709,7 +709,7 @@ diff_content_changed(svn_boolean_t *wrote_header,
   if (mimetype2)
     mt2_binary = svn_mime_type_is_binary(mimetype2);
 
-  if (! dwi->force_binary && (mt1_binary || mt2_binary))
+  if (! dwi->force_binary && (mt1_binary || mt2_binary) && !dwi->diffstat)
     {
       /* Print out the diff header. */
       if (!dont_use_color)
@@ -797,6 +797,12 @@ diff_content_changed(svn_boolean_t *wrote_header,
       /* Exit early. */
       return SVN_NO_ERROR;
     }
+  else if (! dwi->force_binary && (mt1_binary || mt2_binary) && dwi->diffstat)
+    {
+      /* Suppress binary files' warning */
+      /* TODO */
+      return SVN_NO_ERROR;
+    }
 
 
   if (dwi->diff_cmd)
-- 
1.9.1

