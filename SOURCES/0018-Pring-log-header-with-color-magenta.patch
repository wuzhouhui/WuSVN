From cdf8b0900b09e47303867d5b208b246283e6f563 Mon Sep 17 00:00:00 2001
From: wuzhouhui <wuzhouhui250@gmail.com>
Date: Wed, 28 Dec 2016 22:33:55 +0800
Subject: [PATCH 18/95] Pring log header with color magenta

---
 subversion/include/private/svn_color.h |  2 ++
 subversion/svn/log-cmd.c               | 15 ++++++++++++---
 2 files changed, 14 insertions(+), 3 deletions(-)

diff --git a/subversion/include/private/svn_color.h b/subversion/include/private/svn_color.h
index cc7e56d..b6949c9 100644
--- a/subversion/include/private/svn_color.h
+++ b/subversion/include/private/svn_color.h
@@ -6,5 +6,7 @@
 #define SVN_COLOR_GREEN        "\033[32m"
 #define SVN_COLOR_BLUE         "\033[34m"
 #define SVN_COLOR_YELLOW       "\033[33m"
+#define SVN_COLOR_MAGENTA      "\033[35m"
+#define SVN_COLOR_CYAN         "\033[36m"
 
 #endif /* SVN_COLOR_H */
diff --git a/subversion/svn/log-cmd.c b/subversion/svn/log-cmd.c
index 57f8415..9108681 100644
--- a/subversion/svn/log-cmd.c
+++ b/subversion/svn/log-cmd.c
@@ -39,6 +39,9 @@
 #include "private/svn_cmdline_private.h"
 #include "private/svn_sorts_private.h"
 #include "private/svn_utf_private.h"
+#include "private/svn_color.h"
+
+extern int stdout_is_tty;
 
 #include "cl.h"
 #include "cl-log.h"
@@ -363,9 +366,15 @@ svn_cl__log_entry_receiver(void *baton,
       return SVN_NO_ERROR;
     }
 
-  SVN_ERR(svn_cmdline_printf(pool,
-                             SVN_CL__LOG_SEP_STRING "r%ld | %s | %s",
-                             log_entry->revision, author, date));
+  if (stdout_is_tty)
+    SVN_ERR(svn_cmdline_printf(pool,
+                               SVN_COLOR_MAGENTA SVN_CL__LOG_SEP_STRING
+                               SVN_COLOR_MAGENTA "r%ld | %s | %s",
+			       log_entry->revision, author, date));
+  else
+    SVN_ERR(svn_cmdline_printf(pool,
+                               SVN_CL__LOG_SEP_STRING "r%ld | %s | %s",
+			       log_entry->revision, author, date));
 
   if (message != NULL)
     {
-- 
1.8.3.1

